## [П]|[РС]|(РП) Загрузка изображения

Прежде, чем отобразить изображение на экране, его необходимо загрузить. Для этого используется функция *cvLoadImage()*:

```cpp
	IplImage* cvLoadImage(
		 const char*	filename
		,int 			iscolor = CV_LOAD_IMAGE_COLOR
	);
```

При загрузке изображения, *cvLoadImage()* не реагирует на расширение файла. Вместо этого *cvLoadImage()* анализирует первые несколько байт файла (т.н. "магическую последовательность") и определяет какой кодек использовать. Второй аргумент *iscolor* может быть установлено в одно из нескольких значений. По умолчанию изображения загружаются 3-ех канальными и 8-битными; дополнительный флаг *CV_LOAD_IMAGEANYDEPTH* может быть использован для загрузки не 8-битных изображений. *CV_LOAD_IMAGE_COLOR* - значение флага по умолчанию. Это означает, что независимо от количества каналов в загружаемом изображение, данное изображение будет при необходимости превращаться в 3-канальное. Альтернативными флагами являются *CV_LOAD_IMAGE_GRAYSCALE* и *CV_LOAD_IMAGE_ANYCOLOR*. При использовании *CV_LOAD_IMAGE_GRAYSCALE* загружаемое изображение автоматически преобразуется в одноканальное. При использовании *CV_LOAD_IMAGE_ANYCOLOR* загружается цветное, 3-канальное изображение, не обязательно 8-битное. Для загрузки 16-битного цветного изображения необходимо использовать *CV_LOAD_IMAGE_COLOR | CV_LOAD_IMAGE_ANYDEPTH*. При использовании *CV_LOAD_IMAGE_UNCHANGED* изображение загружается "как есть". Если в результате загрузки изображения возникает ошибка, то функция *cvLoadImage()* возвращает NULL.

Для сохранения изображения используется функция *cvSaveImage()*, которая принимает два аргумента:

```cpp
	int cvSaveImage(
		 const char*	filename
		,const CvArr*	image
	);
```

Первый аргумент *filename* это имя файла, расширение которого используется для определения формата. Второй аргумент *image* это объект-изображение для сохранения. Стоит напомнить, что *CvArr* это аналог базового класса в объектно-ориентированных языках; таким образом вместо *CvArr** можно использовать *IplImage**. Функция *cvSaveImage()* сохраняет только 8-битные, одно- и трёх-канальные изображения в большинство используемых форматов. Более новые графические форматы, такие как *PNG*, *TIFF* и *JPEG2000* позволяют сохранять 16-битные изображения, или даже изображения с плавающей точкой; также некоторые форматы позволяют сохранять 4-канальные изображения (BGR+Alpha). Функция возвращает 1, если сохранение прошло успешно и 0 - если произошла ошибка.
