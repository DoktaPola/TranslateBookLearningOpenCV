## (П]|(РС)|(РП) Заливка

Заливка - чрезвычайно полезная функция, которая зачастую используется для того, чтобы отметить или выделить часть изображения для дальнейшей обработки или анализа. Заливка может быть использована для получения маски из исходного изображения для использования в последующих процедурах, чтобы ускорить обработку или ограничить обработку только тех пикселей, которые указаны в маске. Между тем, сама функция *cvFloodFill()* принимает в качестве необязательного аргумента маску, которая в дальнейшем может быть использована для управления процессов заливки (например, для выполнения нескольких заливок на одном изображении).

В OpenCV функция заливки имеет более обобщенную идею, нежели чем в стандартных программах для рисования. Для обоих случаев выбирается начальная точка на изображении, а затем все подобные соседние точки окрашиваются в однородный цвет. Разница здесь заключается в том, что соседние пикселы не должны быть все одинаковые по цвету. Результатом операции заливки всегда будет одна непрерывная область. Функция *cvFloodFill()* будет закрашивать соседний пиксель, если он находится в пределах указанного диапазона (*loDiff* и *upDiff*) текущего пикселя или если (в зависимости от настроек флагов) соседний пиксель находиться в пределах указанного диапазона для точки *seedPoint*. Заливка также может быть ограничена за счет дополнительного аргумента маски. Прототип функции заливки:

```cpp
	void cvFloodFill(
		 IplImage*			img
		,CvPoint			seedPoint
		,CvScalar			newVal
		,CvScalar			loDiff 	= cvScalarAll(0)
		,CvScalar			upDiff 	= cvScalarAll(0)
		,CvConnectedComp*	comp 	= NULL
		,int				flags 	= 4
		,CvArr*				mask 	= NULL
	);
```

*img* - исходное изображение, которое может быть 8-битным или вещественным и одно- или трехканальным. *seedPoint* - начальная точка для заливки, *newVal* - значение цвета заливки. Пиксель будет раскрашен, если его интенсивность не меньше, чем интенсивность закрашенного соседа минус *loDiff* и не больше, чем интенсивность закрашенного соседа плюс *upDiff*. Если *flags* содержит *CV_FLOODFILL_FIXED_RANGE*, то пиксель будет сравниваться с начальной точкой, а не с соседними пикселями. Если *comp != NULL*, то в структуре *CvConnectedComp* будет содержаться статистика заполненных областей. Первый пример заливки показан на рисунке 5-19.

Аргумент *mask* 